"use strict";
/*!
 * Copyright (C) Microsoft Corporation. All rights reserved.
 */
Object.defineProperty(exports, "__esModule", { value: true });
require("jest");
var React = require("react");
var ReactTestUtils = require("react-dom/test-utils");
var tests_1 = require("../../utilities/tests");
var NumericalField_1 = require("./NumericalField");
describe('IntegerField', function () {
    var AdaptedIntegerField = function (props) { return (React.createElement(NumericalField_1.IntegerField, { value: props.value, onBlurred: props.onChanged })); };
    it('should allow integers to be input', function () {
        expect(tests_1.simulateInput(AdaptedIntegerField, 321, '1234')).toEqual({
            hasBeenChanged: true,
            lastValue: 1234
        });
        expect(tests_1.simulateInput(AdaptedIntegerField, 321, '-1234')).toEqual({
            hasBeenChanged: true,
            lastValue: -1234
        });
        expect(tests_1.simulateInput(AdaptedIntegerField, 321, '-12.0')).toEqual({
            hasBeenChanged: true,
            lastValue: -12
        });
        expect(tests_1.simulateInput(AdaptedIntegerField, 321, '0')).toEqual({
            hasBeenChanged: true,
            lastValue: 0
        });
    });
    it('should never emit onChanged if set to a non-integer value as its first action', function () {
        expect(tests_1.simulateInput(AdaptedIntegerField, 321, 'hello')).toEqual({
            hasBeenChanged: false
        });
        expect(tests_1.simulateInput(AdaptedIntegerField, 321, '12.34')).toEqual({
            hasBeenChanged: false
        });
    });
    it('should revert back to the previous value if non-integer input is given', function () {
        expect(tests_1.simulateInput(AdaptedIntegerField, 321, '1234', 'hello')).toEqual({
            hasBeenChanged: true,
            lastValue: 1234
        });
        expect(tests_1.simulateInput(AdaptedIntegerField, 321, '1', '12', '12.', '12.3', '12.34')).toEqual({
            hasBeenChanged: true,
            lastValue: 12
        });
    });
    it('should allow for comma-separated values', function () {
        expect(tests_1.simulateInput(AdaptedIntegerField, 321, '123,456,789')).toEqual({
            hasBeenChanged: true,
            lastValue: 123456789
        });
    });
    it('should preserve 0 input', function () {
        var nfRef = React.createRef();
        ReactTestUtils.renderIntoDocument(React.createElement(NumericalField_1.NaturalNumberField, { ref: nfRef, value: 0 }));
        var nfElement = ReactTestUtils.findRenderedDOMComponentWithTag(nfRef.current, 'input');
        ReactTestUtils.Simulate.blur(nfElement);
        expect(nfRef.current.state.formattedValue).toEqual('0');
    });
});
describe('NaturalNumberField', function () {
    var AdaptedNaturalNumberField = function (props) { return (React.createElement(NumericalField_1.NaturalNumberField, { value: props.value, onBlurred: props.onChanged })); };
    it('should allow natural numbers to be input', function () {
        expect(tests_1.simulateInput(AdaptedNaturalNumberField, 321, '1234')).toEqual({
            hasBeenChanged: true,
            lastValue: 1234
        });
        expect(tests_1.simulateInput(AdaptedNaturalNumberField, 321, '12.0')).toEqual({
            hasBeenChanged: true,
            lastValue: 12
        });
        expect(tests_1.simulateInput(AdaptedNaturalNumberField, 321, '0')).toEqual({
            hasBeenChanged: true,
            lastValue: 0
        });
    });
    it('should never emit onChanged if set to a non-natural value as its first action', function () {
        expect(tests_1.simulateInput(AdaptedNaturalNumberField, 321, 'hello')).toEqual({
            hasBeenChanged: false
        });
        expect(tests_1.simulateInput(AdaptedNaturalNumberField, 321, '12.34')).toEqual({
            hasBeenChanged: false
        });
        expect(tests_1.simulateInput(AdaptedNaturalNumberField, 321, '-1234')).toEqual({
            hasBeenChanged: false
        });
    });
    it('should revert back to the previous value if non-natural input is given', function () {
        expect(tests_1.simulateInput(AdaptedNaturalNumberField, 321, '1234', 'hello')).toEqual({
            hasBeenChanged: true,
            lastValue: 1234
        });
        expect(tests_1.simulateInput(AdaptedNaturalNumberField, 321, '1', '12', '12.3', '12.34')).toEqual({
            hasBeenChanged: true,
            lastValue: 12
        });
        expect(tests_1.simulateInput(AdaptedNaturalNumberField, 321, '1', '12', '-12', '-123')).toEqual({
            hasBeenChanged: true,
            lastValue: 12
        });
    });
    it('should allow for comma-separated values', function () {
        expect(tests_1.simulateInput(AdaptedNaturalNumberField, 321, '123,456,789')).toEqual({
            hasBeenChanged: true,
            lastValue: 123456789
        });
    });
});
//# sourceMappingURL=NumericalField.test.js.map