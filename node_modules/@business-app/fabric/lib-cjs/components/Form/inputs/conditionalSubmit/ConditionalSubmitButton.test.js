"use strict";
/*!
 * Copyright (C) Microsoft Corporation. All rights reserved.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var React = require("react");
var ReactTestUtils = require("react-dom/test-utils");
var Form_1 = require("../../Form");
var Validators = require("../../validators/Validators");
var FormTextInput_1 = require("../textInput/FormTextInput");
var FormConditionalSubmitButton_1 = require("./FormConditionalSubmitButton");
describe('FormSubmitButton Unit Tests', function () {
    jest.useFakeTimers();
    beforeEach(function () {
        jest.useFakeTimers();
    });
    afterEach(function () {
        jest.clearAllTimers();
    });
    var ExtendsTextBox = /** @class */ (function (_super) {
        tslib_1.__extends(ExtendsTextBox, _super);
        function ExtendsTextBox() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        ExtendsTextBox.prototype.setValue = function (value) {
            _super.prototype.setValue.call(this, value);
        };
        return ExtendsTextBox;
    }(FormTextInput_1.FormTextInput));
    // Disabled because of intermittent issues with timer logic.
    it.skip('Button is disabled when form is invalid and enabled when form is valid', function (done) {
        var formRef = React.createRef();
        ReactTestUtils.renderIntoDocument(React.createElement(Form_1.Form, { ref: formRef },
            React.createElement(ExtendsTextBox, { inputKey: "name", validators: [Validators.required('Error')] }),
            React.createElement(FormConditionalSubmitButton_1.FormConditionalSubmitButton, null)));
        var button = ReactTestUtils.findRenderedDOMComponentWithClass(formRef.current, 'ms-Button');
        var textBox = ReactTestUtils.findRenderedComponentWithType(formRef.current, ExtendsTextBox);
        expect(button.getAttribute('disabled')).toEqual('');
        textBox.setValue('Value');
        jest.runAllTimers();
        expect(button.getAttribute('disabled')).toBeFalsy();
        done();
    });
});
//# sourceMappingURL=ConditionalSubmitButton.test.js.map