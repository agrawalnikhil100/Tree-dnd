/*!
 * Copyright (C) Microsoft Corporation. All rights reserved.
 */
import * as React from 'react';
import { Form, FormConditionalSubmitButton, FormDatePicker, FormTextInput, IFormResult } from '..';
import * as Validators from '../validators/Validators';

export interface IFormValidationExampleState {
  formResults: IFormResult;
}

export class FormValidationExample extends React.Component<{}, IFormValidationExampleState> {
  public render(): JSX.Element {
    return (
      <div>
        <Form onSubmit={this._onSubmit}>
          <FormTextInput
            textFieldProps={{ label: 'Text Input with max length of 10' }}
            inputKey="maxLength"
            validators={[Validators.maxLength(10, (length: number) => 'Must be less than 10 characters')]}
          />
          <FormTextInput
            textFieldProps={{ label: 'Text input with min length of 10' }}
            inputKey="minLength"
            validators={[Validators.minLength(10, (length: number) => 'Must be greater than 10 characters')]}
          />
          <FormTextInput
            textFieldProps={{ label: 'Required text input' }}
            inputKey="required"
            validators={[Validators.required('Field is required')]}
          />
          <FormDatePicker
            datePickerProps={{ label: 'Date Picker with date no less than yesterday' }}
            inputKey="date"
            validators={[
              (value: Date) => {
                if (value) {
                  const date = new Date();
                  date.setDate(date.getDate() - 1);
                  if (value.getTime() < date.getTime()) {
                    return 'Date must be today or later';
                  }
                }
                return undefined;
              }
            ]}
          />
          <FormConditionalSubmitButton>Submit</FormConditionalSubmitButton>
        </Form>
        {this.state && this.state.formResults && (
          <div className="results-view">
            <h4>Results</h4>
            {JSON.stringify(this.state.formResults)}
          </div>
        )}
      </div>
    );
  }

  private _onSubmit = (values: IFormResult): void => {
    this.setState({ formResults: values });
  };
}
